<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="The blog of a DevKid">
    <meta name="author" content="skriptble">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="shortcut icon" href="/favicon.png">
    <title>skriptble &mdash; Expanding To Drupal 8</title>
    <!-- Bootstrap -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/skriptble.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="//cdn.moot.it/1/moot.css">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->

  </head>
  <body>
        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" href="/">skriptble</a>
          <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav">
            <li><a href="/resume">Resume</a></li>
            <li><a href="/about">About</a></li>
            <li><a href="/drafts">Drafts</a></li>
          </ul>
        </div>
      </div> <!-- /container -->
    </div>
    <div class="container">

      <header>
                      </header>
      <section id="main" role="main">
            <h1 class="page-title">Expanding To Drupal 8
    </h1>
    <span class="post-date">December 4, 2013</span>
  
  <p>I&#8217;ve been hard at working building the new infrastructure at work, so I&#8217;ve been
buried deep in Puppet and Vagrant. I wanted to get my head out of system
administration for a bit so today I started the task of migrating a module from
Drupal 7 to Drupal 8 alpha 8.</p>

<!-- more -->

<h2>The Plan</h2>

<p>The module I&#8217;ll be migrating is the authentication module we use on our sites.
Like most universities, we have an internal single sign-on system. Using an
outside of Drupal authentication system reduces headaches, emails for password
reset, and over all enhances the security of our sites. I believe the steps I&#8217;m
taking will be applicable to most modules that are migrated from Drupal 7 to
Drupal 8. Here are the steps I&#8217;ve come up with:</p>

<ol>
<li>Update the .info file an .info.yml file.</li>
<li>Update the menu router entries to use the new menu routing system</li>
<li>Update the variables used to use the new configuration system</li>
<li>Add new database tables as required.

<ul>
<li>While this could be accomplished using the configuration management system,
this particular module is for authentication so managing users in the database
isn&#8217;t a bad idea.</li>
</ul></li>
<li>Build the administrator forms and menu router entries</li>
<li>Write custom logic

<ul>
<li>In this case it will be an alternative way of authenticating.</li>
</ul></li>
</ol>

<p>There are parts of the module that will remain similar to how they function in
the Drupal 7 version, such as form alters. Other items, such as administration
forms, will be vastly different. Overall the goal is to simply get the module
running on Drupal 8.</p>

<h2>The Known Hurdles</h2>

<p>Unfortunately, the API I used in Drupal 6 &amp; 7 to handle external authentication
has been removed from Drupal 8, which means that functionality will need to be
written into the module for the Drupal 8 version. This isn&#8217;t necessarily a bad
thing, the implementation of the external user login API was confusing and only
contained 2 functions in Drupal 6 and 3 functions in Drupal 7. It isn&#8217;t too much
of a burden to place on the module.</p>

<p>Learning the new way to create custom forms and routes will probably be the most
difficult part of shifting from Drupal 7 to 8. I don&#8217;t believe this will be a
difficult hurdle, but it will be a hurdle nonetheless.</p>

<p>Finally, the new configuration management system will be implemented. The Drupal
7 version of the module heavily uses the variable system. It uses them all over
the place purely for configuration. I will be more than happy to remove these
items from the variables table. This will make the module easier to launch and
deploy across the different environments.</p>

<h2>The Opportunities</h2>

<p>The largest opportunity that comes to mind is potentially starting a 3.x branch
of the Drupal 7 version and using the backported version of the configuration
management API in Drupal 8. If a solid implementation of this can be created, I
might even be able to use this module in a tool I&#8217;ve been working on called
Pudding. I was going to default to using features and some other custom code to
handle exporting the configuration into code, but standing on the shoulders of
another modules would be much more efficient.</p>

<p>I also see the potential for a landslide effect. Once we have the requisite
modules working inside of Drupal 8, there isn&#8217;t much stopping us from switching
platforms. Most of our sites and either custom code or a few contrib modules,
some of which are now in core.</p>

<h2>The Build</h2>

<p>I plan on updating with more posts as I progress through the adventure of
migrating a module from Drupal 7 to Drupal 8. I have never migrated a module
or site from D5 to D7, so this is my first time doing this. I honestly feel like
this experience will help me not only inside of Drupal but also exploring
outside of Drupal.</p>

      </section>
      <footer>
                
              </footer>
    </div>
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/js/bootstrap.js"></script>
    <script src="//cdn.moot.it/1/moot.min.js"></script>
    
   <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-45623011-1', 'skriptble.github.io');
  ga('send', 'pageview');

</script>
  </body>
</html>
